Here is your **updated README** with the correct cookie workflow using the Apify Dashboard encryption step (instead of storing raw cookies locally).

---

# LinkedIn Sales Navigator Scraper (Apify Integration)

## üìå Overview

This project is a Python-based automation tool that integrates with the Apify Actor:

> **quantifiable_extension/linkedin-sales-navigator-scraper**

It allows you to:

* Provide any LinkedIn Sales Navigator search URL
* Authenticate using your LinkedIn session cookies
* Run the Apify Sales Navigator Scraper Actor
* Retrieve structured profile results as JSON
* Control scraping parameters directly from Python

The script handles:

* Cookie extraction workflow
* Actor execution and polling
* Dataset retrieval
* Returning clean Python JSON output

---

## üß† How It Works

1. You log into LinkedIn Sales Navigator.
2. Export your browser cookies.
3. Paste them into the Apify Actor dashboard.
4. Apify encrypts them into a `cookieString`.
5. You pass this encrypted `cookieString` to the Python script.
6. The script runs the Actor and returns results.

‚ö†Ô∏è You **do NOT** pass raw cookies directly to Python.

---

# üöÄ Setup Guide

## 1Ô∏è‚É£ Install Dependencies

```bash
pip install apify-client python-dotenv
pip install -r requirements.txt
```

---

## 2Ô∏è‚É£ Create Environment Variables

Create a `.env` file in the project root:

```env
APIFY_TOKEN=your_apify_api_token_here
COOKIE_STRING=your_encrypted_cookie_string_here
```

‚ö†Ô∏è **Never commit this file to GitHub.**

---

# üîê How to Get LinkedIn Sales Navigator Cookies (Correct Method)

This scraper requires an **encrypted cookieString** generated by Apify.

---

## ‚úÖ Step-by-Step Process

### 1Ô∏è‚É£ Log Into Sales Navigator

* Log into your LinkedIn account.
* Open **LinkedIn Sales Navigator**.
* Open any **Sales Navigator search results page**.

---

### 2Ô∏è‚É£ Export Cookies Using Chrome Extension

Install Chrome extension:

üëâ **Cookie Editor**
[https://chromewebstore.google.com/detail/cookie-editor/hlkenndednhfkekhgcdicdfddnkalmdm](https://chromewebstore.google.com/detail/cookie-editor/hlkenndednhfkekhgcdicdfddnkalmdm)

Steps:

1. Click the **Cookie Editor** extension.
2. Click **Export**.
3. Select **JSON format**.
4. Copy the exported JSON.

---

### 3Ô∏è‚É£ Paste Cookies Into Apify Dashboard

Go to:

üëâ [https://console.apify.com/actors/3NjWw0agyWRvsGwwT/input](https://console.apify.com/actors/3NjWw0agyWRvsGwwT/input)

Steps:

1. Paste your exported JSON cookies into the cookie input field.
2. Click the **JSON** toggle option.
3. The dashboard will generate an encrypted:

```
cookieString
```

---

### 4Ô∏è‚É£ Copy the Encrypted `cookieString`

This encrypted value is what you must use in your Python code.

Example:

```env
COOKIE_STRING=eyJjb29raWVzIjpbeyJkb21haW4iOiIubGlua2VkaW4uY29tIiwibmFtZSI6ImxpX2F0Iiwi...
```

---

# üõ† How to Use the Script

Inside your script:

```python
url = "https://www.linkedin.com/sales/search/people?query=(filters:...)"

results, meta = run_sales_nav_scraper(
    search_url=url,
    cookie_string=os.getenv("COOKIE_STRING"),
    total_records=50,
    start_page=1,
    deep_scrape=False,
    min_wait_s=5,
    max_wait_s=30,
)
```

---

# ‚öôÔ∏è Parameters Explained

| Parameter       | Type | Description                                          |
| --------------- | ---- | ---------------------------------------------------- |
| `search_url`    | str  | Full LinkedIn Sales Navigator search URL             |
| `cookie_string` | str  | **Encrypted cookieString from Apify dashboard**      |
| `total_records` | int  | Maximum number of profiles to scrape                 |
| `start_page`    | int  | Page number to begin scraping from                   |
| `deep_scrape`   | bool | If True, visits each profile for detailed extraction |
| `min_wait_s`    | int  | Minimum wait between page loads                      |
| `max_wait_s`    | int  | Maximum wait between page loads                      |
| `proxy_group`   | str  | Apify proxy group (default: RESIDENTIAL)             |
| `proxy_country` | str  | Optional proxy country code (e.g., US, GB)           |
| `timeout_s`     | int  | Max seconds to wait for Actor completion             |
| `max_items`     | int  | Limit number of dataset items returned locally       |

---

# üì¶ Output

The function returns:

```python
results  # list of dicts (JSON profiles)
meta     # run metadata
```

Example:

```python
print(meta)
print(len(results))
print(results[0])
```

---

# üßæ Example Output Structure

```json
{
  "fullName": "John Doe",
  "headline": "CEO at Example Corp",
  "company": "Example Corp",
  "location": "United States",
  "linkedinUrl": "https://www.linkedin.com/in/johndoe"
}
```

(The exact structure depends on the Actor output schema.)

---

# üõ° Security Recommendations

* Rotate LinkedIn sessions regularly.
* Use residential proxies.
* Keep scraping volumes reasonable.
* Avoid scraping thousands of profiles per day.
* Never expose your `li_at` cookie.
* Never store raw cookies in source files.
* Only use the encrypted `cookieString`.

---

# ‚ö†Ô∏è Important Notes

* Sales Navigator scraping requires valid authenticated cookies.
* LinkedIn may invalidate sessions if scraping is aggressive.
* Cookie expiration will cause Actor failures.
* If you get:

```
Input is not valid: Field input.cookieString is required
```

It means:

* You did not pass the encrypted `cookieString`
* Or it was not properly set in environment variables

---

# üß™ Troubleshooting

## Actor fails with authentication error

* Your LinkedIn session expired.
* Repeat the cookie export process.

## Invalid cookieString

* Ensure you clicked the **JSON toggle** in Apify.
* Ensure you copied the **encrypted version**, not the raw cookies.

---

# üß± Project Structure

```
project/
‚îÇ
‚îú‚îÄ‚îÄ apify.py
‚îú‚îÄ‚îÄ .env
‚îî‚îÄ‚îÄ README.md
```

---

# üéØ Use Cases

* Lead generation
* ICP segmentation
* Market research
* Recruiting intelligence
* Sales automation pipelines

---

If you'd like, I can also:

* Add a **diagram of the authentication flow**
* Add a **short security warning section specifically about LinkedIn ToS**
* Convert this into a more polished GitHub-ready README with badges and formatting**
